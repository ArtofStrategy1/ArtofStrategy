-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.analysis (
  id integer NOT NULL DEFAULT nextval('analysis_id_seq'::regclass),
  query_id integer,
  analysis_type character varying,
  report_content text NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT analysis_pkey PRIMARY KEY (id),
  CONSTRAINT analysis_query_id_fkey FOREIGN KEY (query_id) REFERENCES public.queries(id)
);
CREATE TABLE public.queries (
  id integer NOT NULL DEFAULT nextval('queries_id_seq'::regclass),
  user_id integer,
  customer_name character varying NOT NULL,
  location character varying NOT NULL,
  use_case text NOT NULL,
  prompt text NOT NULL,
  ref_links text,
  created_at timestamp with time zone DEFAULT now(),
  framework text,
  CONSTRAINT queries_pkey PRIMARY KEY (id),
  CONSTRAINT queries_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id)
);
CREATE TABLE public.statistics (
  id integer NOT NULL DEFAULT nextval('statistics_id_seq'::regclass),
  total_users integer NOT NULL,
  total_queries integer NOT NULL,
  database_size bigint NOT NULL,
  recorded_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT statistics_pkey PRIMARY KEY (id)
);
CREATE TABLE public.users (
  id integer NOT NULL DEFAULT nextval('users_id_seq'::regclass),
  auth_user_id uuid NOT NULL UNIQUE,
  created_at timestamp with time zone DEFAULT now(),
  first_name character varying,
  last_name character varying,
  CONSTRAINT users_pkey PRIMARY KEY (id),
  CONSTRAINT users_auth_user_id_fkey FOREIGN KEY (auth_user_id) REFERENCES auth.users(id)
);